# Valid Sudoku

**难度**: `Medium`


## 问题描述

判断一个 9x9 的数独是否有效。只需要根据以下规则，验证已经填入的数字是否有效即可。

- 数字 1-9 在每一行只能出现一次。
- 数字 1-9 在每一列只能出现一次。
- 数字 1-9 在每一个以粗实线分隔的 3x3 宫内只能出现一次。

![示例图](https://raw.githubusercontent.com/garenchan/daily-code/master/docs/pics/question_36.png)
上图是一个部分填充的有效的数独。

数独部分空格内已填入了数字，空白格用 '.' 表示。

**示例 1:**

    输入:
    [
      ["5","3",".",".","7",".",".",".","."],
      ["6",".",".","1","9","5",".",".","."],
      [".","9","8",".",".",".",".","6","."],
      ["8",".",".",".","6",".",".",".","3"],
      ["4",".",".","8",".","3",".",".","1"],
      ["7",".",".",".","2",".",".",".","6"],
      [".","6",".",".",".",".","2","8","."],
      [".",".",".","4","1","9",".",".","5"],
      [".",".",".",".","8",".",".","7","9"]
    ]
    输出: true

**示例 2:**

    输入:
    [
      ["8","3",".",".","7",".",".",".","."],
      ["6",".",".","1","9","5",".",".","."],
      [".","9","8",".",".",".",".","6","."],
      ["8",".",".",".","6",".",".",".","3"],
      ["4",".",".","8",".","3",".",".","1"],
      ["7",".",".",".","2",".",".",".","6"],
      [".","6",".",".",".",".","2","8","."],
      [".",".",".","4","1","9",".",".","5"],
      [".",".",".",".","8",".",".","7","9"]
    ]
    输出: false
    解释: 除了第一行的第一个数字从 5 改为 8 以外，空格内其他数字均与 示例1 相同。
         但由于位于左上角的 3x3 宫内有两个 8 存在, 因此这个数独是无效的。

**说明:**

- 一个有效的数独（部分已被填充）不一定是可解的。
- 只需要根据以上规则，验证已经填入的数字是否有效即可。
- 给定数独序列只包含数字 1-9 和字符 '.' 。
- 给定数独永远是 9x9 形式的。


## 解决方案

### 方案1：直观解法

9行逐行判断，9列逐列判断，9个 3x3 矩阵逐个判断。

```python
from collections import Counter

class Solution:

    def isValidSudoku(self, board):
        """
        :type board: List[List[str]]
        :rtype: bool
        """
        # 逐行判断
        for row in board:
            most = Counter(filter(lambda x: x != '.', row)).most_common(1)
            if most and most[0][1] >= 2:
                return False

        # 逐列判断
        for i in range(9):
            col = [row[i] for row in board if row[i] != '.']
            most = Counter(col).most_common(1)
            if most and most[0][1] >= 2:
                return False

        # 逐个 3x3 矩阵判断
        # x, y表示每个矩阵的左上角坐标
        for i in range(3):
            y = i * 3
            for j in range(3):
                x = j * 3
                matrix = [
                    board[y + m][x + n]
                    for m in range(3)
                    for n in range(3)
                    if board[y + m][x + n] != '.'
                ]
                most = Counter(matrix).most_common(1)
                if most and most[0][1] >= 2:
                    return False

        return True
```
